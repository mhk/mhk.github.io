<html>
  <head>
    <style>
    textarea {
      font-family: monospace;
      font-size: 22px;
      line-height: 1.5em;
      width: 75%;
      height: 150px;
    }
    </style>
    <link rel="stylesheet" href="https://pyscript.net/latest/pyscript.css" />
    <script defer src="https://pyscript.net/latest/pyscript.js"></script>
    <script type="text/javascript">
        function createObject(object, variableName) {
            //Bind a variable whose name is the string variableName
            // to the object called 'object'
            let execString = variableName + " = object"
            console.log("Running '" + execString + "'");
            eval(execString)
        }

        document.addEventListener('keydown', (event) => { logKeyDown(event) }, false);
        function logKeyDown(event) {
            // log.textContent += ` Down ${event.code} (${event.key})`;
            pyKeyDown(event.key);
        }

        document.addEventListener('keyup', (event) => { logKeyUp(event) }, false);
        function logKeyUp(event) {
            /*
            if('Backspace' === event.code) {
                log.textContent = ''; 
            }
            log.textContent += ` UP ${event.code} (${event.key})`;
             */
            pyKeyUp(event.key);
        }
        function update_text(s) {
            steno.textContent = s;
        }
    </script>
  </head>
  <body>
    <py-config>
        packages = ["setuptools"]
        [[fetch]]
        files = ['plover/gui_none/main.py', 'plover/engine.py', 'plover/log.py',
                'plover/system/__init__.py', 'plover/system/english_stenotype.py',
                'plover/resource.py', 'plover/registry.py', 'plover/steno.py',
                'plover/dictionary/__init__.py',  'plover/dictionary/json_dict.py',        'plover/dictionary/rtfcre_dict.py',
                'plover/dictionary/base.py',      'plover/dictionary/loading_manager.py',  'plover/dictionary/rtfcre_parse.py',

                'plover/machine/keymap.py', 'plover.cfg',
                './plover/machine/external.py', 'plover/gui_none/add_translation.py',
                'plover/command/__init__.py',  'plover/command/set_config.py',
                'plover/dictionary/__init__.py',  'plover/dictionary/json_dict.py',        'plover/dictionary/rtfcre_dict.py',
                'plover/dictionary/base.py',      'plover/dictionary/loading_manager.py',  'plover/dictionary/rtfcre_parse.py',
                'plover/machine/__init__.py',  'plover/machine/geminipr.py',  'plover/machine/passport.py',  'plover/machine/txbolt.py',
                'plover/machine/base.py',      'plover/machine/keyboard.py',  'plover/machine/procat.py',
                'plover/machine/external.py',  'plover/machine/keymap.py',    'plover/machine/stentura.py',
                'plover/macro/__init__.py',  'plover/macro/repeat.py',  'plover/macro/retrospective.py',  'plover/macro/undo.py',
                'plover/meta/__init__.py',  'plover/meta/command.py',      'plover/meta/glue.py',       'plover/meta/punctuation.py',
                'plover/meta/attach.py',    'plover/meta/conditional.py',  'plover/meta/key_combo.py',  'plover/meta/word_end.py',
                'plover/meta/case.py',      'plover/meta/currency.py',     'plover/meta/mode.py',
                'plover/system/__init__.py',  'plover/system/english_stenotype.py',
                'commands.json', 'main.json', 'user.json',
                'plover/oslayer/config.py',
                'plover.egg-info/PKG-INFO', 'plover.egg-info/dependency_links.txt', 'plover.egg-info/requires.txt',
                'plover.egg-info/zip-safe', 'plover.egg-info/SOURCES.txt', 'plover.egg-info/entry_points.txt', 
                'plover.egg-info/top_level.txt', 'plover/oslayer/keyboardcontrol.py',

                'plover/translation.py',
                'plover/__init__.py',  'plover/exception.py',   'plover/log.py',          'plover/resource.py',          
                'plover/__main__.py',  'plover/formatting.py',  'plover/misc.py',         'plover/steno.py',
                'plover/config.py',    'plover/i18n.py',        'plover/orthography.py',  'plover/steno_dictionary.py',
                'plover/engine.py',    'plover/key_combo.py',   'plover/registry.py',     'plover/suggestions.py',

                'plover/machine/keyboard_capture/__init__.py',
                ]
        from = './'
        to_folder = './'
    </py-config>
    <py-script>
        import js
        from plover.gui_none.main import main2
        main2()
    </py-script>
    <p id="log">THIS IS A TEST</p>
    <textarea id='steno'></textarea>
  </body>
</html>
